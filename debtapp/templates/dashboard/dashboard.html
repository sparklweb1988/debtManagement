{% extends 'base.html' %} {% block content %}
<div class="container">
  <h1>Welcome, {{ user.username }} to Your Dashboard</h1>

  <!-- Summary Section -->
  <p class="prof">Total Profit &#8358; {{ profit }}</p>
  <div class="card-container">
    <div class="card">
      <h3>Total Debtors</h3>
      <p>{{ total_debtors }}</p>
    </div>
    <div class="card">
      <h3>Total Income</h3>
      <p class="inc">&#8358; {{ total_income }}</p>
    </div>
    <div class="card">
      <h3>Total Expenditure</h3>
      <p class="exp">&#8358; {{ total_expenditure }}</p>
    </div>
  </div>

  <!-- CHARTS -->
  <div class="chart-container">
    <!-- Total Income Chart -->
    <div class="chart-box">
      <div class="left-chart">
        <!-- <h3>Total Income for the Month</h3> -->
        <div>
          <canvas id="incomeChart"></canvas>
        </div>
        <script>
          const incomeCtx = document.getElementById('incomeChart').getContext('2d');
          new Chart(incomeCtx, {
            type: 'bar',  // Change to 'bar' if you want a bar chart
            data: {
              labels: ['Income'],  // Single label for total income
              datasets: [{
                label: 'Total Income ',
                data: [{{ total_income }}],  // Total income value
              borderWidth: 2,
              borderColor: 'rgba(75, 192, 192, 1)',
              backgroundColor: 'rgba(75, 192, 192, 0.2)',
              fill: false,  // Set to false if you want a line chart without filling
            }]
          },
            options: {
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  callback: function (value) {
                    return '₦' + value.toLocaleString();  // Format the y-axis with currency
                  }
                }
              }
            }
          }
          });
        </script>
      </div>
    </div>

    <!-- Total Expenditure Chart -->
    <div class="chart-box">
      <div class="right-chart">
        <!-- <h3>Total Expenditure for the Month</h3> -->
        <div>
          <canvas id="expenditureChart"></canvas>
        </div>
        <script>
          const expenditureCtx = document.getElementById('expenditureChart').getContext('2d');
          new Chart(expenditureCtx, {
            type: 'bar',  // Change to 'bar' if you want a bar chart
            data: {
              labels: ['Expenditure'],  // Single label for total expenditure
              datasets: [{
                label: 'Total Expenditure ',
                data: [{{ total_expenditure }}],  // Total expenditure value
              borderWidth: 2,
              borderColor: 'rgba(255, 99, 132, 1)',
              backgroundColor: 'rgba(255, 99, 132, 0.2)',
              fill: false,  // Set to false if you want a line chart without filling
            }]
          },
            options: {
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  callback: function (value) {
                    return '₦' + value.toLocaleString();  // Format the y-axis with currency
                  }
                }
              }
            }
          }
          });
        </script>
      </div>
    </div>
  </div>
  <!-- END CHARTS -->
</div>
{% endblock content %}